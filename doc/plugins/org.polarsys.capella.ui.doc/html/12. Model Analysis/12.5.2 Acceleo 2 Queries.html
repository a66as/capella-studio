<?xml version='1.0' encoding='utf-8' ?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
		<title>12.5.2 Acceleo 2 Queries</title>
		<link type="text/css" rel="stylesheet" href="PLUGINS_ROOT/org.polarsys.capella.doc/html/styles.css"/>
	</head>
	<body>
		<h1 id="Legacy_Model_requests_interpreter_View_and_Acceleo_2_queries_.5Bdeprecated.5D">Legacy Model requests interpreter View and Acceleo 2 queries [deprecated]</h1>
		<h2 id="Model_Requests_Interpreter_View">Model Requests Interpreter View</h2>
		<p>Using the Model requests interpreter view, you can write and evaluate queries on model elements using the following languages:
<ul>
<li>Acceleo 2,</li>
<li>AQL.</li>
</ul>

			<br/>

			<img height="350" width="500" border="0" src="Images/12_5_ Acceleo Queries_html_m22fce208.png"/>
		</p>
		<p>
			<br/>
			In the following sections, we will describe the syntax of Acceleo 2 queries by providing some examples. For more information, have a look at the Acceleo 2.6 online reference guide.

			<br/>
		</p>
		<h2 id="Acceleo_2:_query_examples">Acceleo 2: query examples</h2>
		<h3 id="Basic_Model_Queries">Basic Model Queries</h3>
		<table border="1" cellpadding="7" width="879">
			<tr valign="TOP">
				<td>
					<p>
						<b>Description</b>
					</p>
				</td>
				<td>
					<p>
						<b>Workbench Selection</b>
					</p>
				</td>
				<td>
					<p>
						<b>Syntax</b>
					</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Current Element</p>
				</td>
				<td>
					<p>A model element</p>
				</td>
				<td>
					<p>&lt;%current%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Container of current element</p>
				</td>
				<td>
					<p>A model element</p>
				</td>
				<td>
					<p>&lt;%current.eContainer%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Type of an element</p>
				</td>
				<td>
					<p>A model element</p>
				</td>
				<td>
					<p>&lt;%current.eClass%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Total number of elements in a model</p>
				</td>
				<td>
					<p>A model element</p>
				</td>
				<td>
					<p>&lt;%current.ancestor.nLast.eAllContents.nSize%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Total number of sub-elements</p>
				</td>
				<td>
					<p>A model element</p>
				</td>
				<td>
					<p>&lt;%current.eAllContents.nSize%&gt;</p>
				</td>
			</tr>
		</table>
		<p>
			<br/>
		</p>
		<h3 id="Diagram_Queries">Diagram Queries</h3>
		<table border="1" cellpadding="7" width="879">
			<tr valign="TOP">
				<td>
					<p>
						<b>Description</b>
					</p>
				</td>
				<td>
					<p>
						<b>Workbench Selection</b>
					</p>
				</td>
				<td>
					<p>
						<b>Syntax</b>
					</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Semantic element associated to a graphical element</p>
				</td>
				<td>
					<p>A diagram element</p>
				</td>
				<td>
					<p>&lt;%current.target%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Number of diagrams</p>
				</td>
				<td>
					<p>A diagram element</p>
				</td>
				<td>
					<p>&lt;%(current.ancestor.referencedAnalysis current.ancestor 
						current.ancestor.referencedAnalysis.referencedAnalysis 
						current.ancestor.referencedAnalysis.referencedAnalysis.
						referencedAnalysis current.ancestor.referencedAnalysis.
						referencedAnalysis.referencedAnalysis.referencedAnalysis 
						current.ancestor.referencedAnalysis.referencedAnalysis.
						referencedAnalysis.referencedAnalysis.referencedAnalysis)
						[eClass.name=="DAnalysis"].minimize.ownedViews.
						ownedRepresentations.nSize()%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Diagrams without Sequence diagram</p>
				</td>
				<td>
					<p>A diagram element</p>
				</td>
				<td>
					<p>&lt;%(current.ancestor.referencedAnalysis current.ancestor 
						current.ancestor.referencedAnalysis.referencedAnalysis 
						current.ancestor.referencedAnalysis.referencedAnalysis.
						referencedAnalysis current.ancestor.referencedAnalysis.
						referencedAnalysis.referencedAnalysis.referencedAnalysis 
						current.ancestor.referencedAnalysis.referencedAnalysis.
						referencedAnalysis.referencedAnalysis.referencedAnalysis)
						[eClass.name=="DAnalysis"].minimize.ownedViews.
						ownedRepresentations[description.name.endsWith("Scenario")==false]%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>List of different viewpoints</p>
				</td>
				<td>
					<p>A diagram element</p>
				</td>
				<td>
					<p>&lt;%(current.ancestor.referencedAnalysis current.ancestor 
						current.ancestor.referencedAnalysis.referencedAnalysis 
						current.ancestor.referencedAnalysis.referencedAnalysis.
						referencedAnalysis current.ancestor.referencedAnalysis.
						referencedAnalysis.referencedAnalysis.referencedAnalysis 
						current.ancestor.referencedAnalysis.referencedAnalysis.
						referencedAnalysis.referencedAnalysis.referencedAnalysis)
						[eClass.name=="DAnalysis"].ownedViews.viewpoint.nMinimize()%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Number of graphical elements in all diagrams</p>
				</td>
				<td>
					<p>A diagram element</p>
				</td>
				<td>
					<p>&lt;%(current.ancestor.referencedAnalysis current.ancestor 
						current.ancestor.referencedAnalysis.referencedAnalysis 
						current.ancestor.referencedAnalysis.referencedAnalysis.
						referencedAnalysis current.ancestor.referencedAnalysis.
						referencedAnalysis.referencedAnalysis.referencedAnalysis 
						current.ancestor.referencedAnalysis.referencedAnalysis.
						referencedAnalysis.referencedAnalysis.referencedAnalysis)
						[eClass.name=="DAnalysis"].minimize.ownedViews.
						ownedRepresentations.diagramElements.nSize()%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Number of graphical elements in all diagrams (including technical elements like style, colorâ€¦)</p>
				</td>
				<td>
					<p>A diagram element</p>
				</td>
				<td>
					<p>&lt;%(current.ancestor.referencedAnalysis current.ancestor 
						current.ancestor.referencedAnalysis.referencedAnalysis 
						current.ancestor.referencedAnalysis.referencedAnalysis.
						referencedAnalysis current.ancestor.referencedAnalysis.
						referencedAnalysis.referencedAnalysis.referencedAnalysis 
						current.ancestor.referencedAnalysis.referencedAnalysis.
						referencedAnalysis.referencedAnalysis.referencedAnalysis)
						[eClass.name=="DAnalysis"].minimize.eAllContents.nSize()%&gt;</p>
				</td>
			</tr>
		</table>
		<p>
			<br/>
		</p>
		<h3 id="Searching_Strings">Searching Strings</h3>
		<table border="1" cellpadding="7" width="879">
			<tr valign="TOP">
				<td>
					<p>
						<b>Description</b>
					</p>
				</td>
				<td>
					<p>
						<b>Workbench Selection</b>
					</p>
				</td>
				<td>
					<p>
						<b>Syntax</b>
					</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>All element containing the "TODO" string in their 'Name' property</p>
				</td>
				<td>
					<p>A model element</p>
				</td>
				<td>
					<p>&lt;%current.eAllContents()[name.matches(".*TODO.*")]%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>All element containing the "TODO" string in their 'Summary' property</p>
				</td>
				<td>
					<p>A model element</p>
				</td>
				<td>
					<p>&lt;%current.eAllContents()[summary.matches(".*TODO.*")]%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>All element containing the "TODO" string in their 'Description' property</p>
				</td>
				<td>
					<p>A model element</p>
				</td>
				<td>
					<p>&lt;%current.eAllContents()[description.matches(".*TODO.*")]%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>All diagrams containing a note containing the "TODO" string</p>
				</td>
				<td>
					<p>A diagram element</p>
				</td>
				<td>
					<p>&lt;%(current.ancestor.referencedAnalysis current.ancestor
						current.ancestor.referencedAnalysis.referencedAnalysis
						current.ancestor.referencedAnalysis.referencedAnalysis.
						referencedAnalysis current.ancestor.referencedAnalysis.
						referencedAnalysis.referencedAnalysis.referencedAnalysis
						current.ancestor.referencedAnalysis.referencedAnalysis.
						referencedAnalysis.referencedAnalysis.referencedAnalysis)
						[eClass.name=="DAnalysis"].minimize.
						ownedViews.ownedRepresentations
						[~element.filter("notation.Diagram").eAllContents("notation.Node")
						[type=="Note" &amp;&amp; description.indexOf("TODO")&gt;=0]]%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Number of notes containing the "TODO" string</p>
				</td>
				<td>
					<p>A diagram element</p>
				</td>
				<td>
					<p>&lt;%(current.ancestor.referencedAnalysis current.ancestor
						current.ancestor.referencedAnalysis.referencedAnalysis
						current.ancestor.referencedAnalysis.referencedAnalysis.
						referencedAnalysis current.ancestor.referencedAnalysis.
						referencedAnalysis.referencedAnalysis.referencedAnalysis
						current.ancestor.referencedAnalysis.referencedAnalysis.
						referencedAnalysis.referencedAnalysis.referencedAnalysis)
						[eClass.name=="DAnalysis"].minimize.ownedViews.
						ownedRepresentations[~element.filter("notation.Diagram").
						eAllContents("notation.Node")[type=="Note" &amp;&amp; description.indexOf("TODO")&gt;=0]].nSize()%&gt;</p>
				</td>
			</tr>
		</table>
		<p>
			<br/>
		</p>
		<h3 id="Requirements">Requirements</h3>
		<table border="1" cellpadding="7" width="879">
			<tr valign="TOP">
				<td>
					<p>
						<b>Description</b>
					</p>
				</td>
				<td>
					<p>
						<b>Workbench Selection</b>
					</p>
				</td>
				<td>
					<p>
						<b>Syntax</b>
					</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Query to retrieve the list of non-allocated requirements</p>
				</td>
				<td>
					<p>Requirement Package</p>
				</td>
				<td>
					<p>&lt;%current.eAllContents[relatedCapellaElements==null]%</p>
				</td>
			</tr>
		</table>
		<p>
			<br/>
		</p>
		<h3 id="Model_Navigation_Examples">Model Navigation Examples</h3>
		<table border="1" cellpadding="7" width="879">
			<tr valign="TOP">
				<td>
					<p>
						<b>Description</b>
					</p>
				</td>
				<td>
					<p>
						<b>Workbench Selection</b>
					</p>
				</td>
				<td>
					<p>
						<b>Syntax</b>
					</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>List of functions allocated to a component</p>
				</td>
				<td>
					<p>Any Component</p>
				</td>
				<td>
					<p>&lt;%current.allocatedFunctions%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>List of sub logical components</p>
				</td>
				<td>
					<p>Any Logical Component</p>
				</td>
				<td>
					<p>&lt;%current.subLogicalComponents%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>List of all functions
						- having more than 3 ports
						- allocated to one given component
						- Which name starts with "Store"</p>
				</td>
				<td>
					<p>Any Component</p>
				</td>
				<td>
					<p>&lt;%current.allocatedFunctions[name.startsWith("Store") &amp;&amp; eAllContents().filter("FunctionPort").nSize&gt;3]%&gt;</p>
				</td>
			</tr>
		</table>
		<p>
			<br/>
		</p>
		<h3 id="Metrics">Metrics</h3>
		<table border="1" cellpadding="7" width="879">
			<tr valign="TOP">
				<td>
					<p>
						<b>Description</b>
					</p>
				</td>
				<td>
					<p>
						<b>Workbench Selection</b>
					</p>
				</td>
				<td>
					<p>
						<b>Syntax</b>
					</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Number of XXXX owned by the selected element, where XXXX is the type of a model element (&lt;%current.eClass%&gt; )</p>
				</td>
				<td>
					<p>A model element</p>
				</td>
				<td>
					<p>&lt;%current.eAllContents("XXXX").nSize()%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Number of Operational Activities</p>
				</td>
				<td>
					<p>OperationalAnalysis</p>
				</td>
				<td>
					<p>&lt;%current.eAllContents("OperationalActivity").nSize()%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Number of Operational Interactions</p>
				</td>
				<td>
					<p>OperationalAnalysis</p>
				</td>
				<td>
					<p>&lt;%current.eAllContents("FunctionalExchange").nSize()%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Number of Exchange Items in OA</p>
				</td>
				<td>
					<p>OperationalAnalysis</p>
				</td>
				<td>
					<p>&lt;%current.eAllContents("AbstractExchangeItem").nSize()%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Number of Types (Classes, Datatypes) in OA</p>
				</td>
				<td>
					<p>OperationalAnalysis</p>
				</td>
				<td>
					<p>&lt;%current.eAllContents("DataType").nSize()%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Number of Classes in OA</p>
				</td>
				<td>
					<p>OperationalAnalysis</p>
				</td>
				<td>
					<p>&lt;%current.eAllContents("Class").nSize()%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Number of States or Modes in OA</p>
				</td>
				<td>
					<p>OperationalAnalysis</p>
				</td>
				<td>
					<p>&lt;%(current.eAllContents().filter("State") - current.eAllContents().filter("Mode")).nSize()%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Number of Operational Entities</p>
				</td>
				<td>
					<p>OperationalAnalysis</p>
				</td>
				<td>
					<p>&lt;%(current.eAllContents("Entity")-current.eAllContents("OperationalActor")).nSize()%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Number of Operational Actors</p>
				</td>
				<td>
					<p>OperationalAnalysis</p>
				</td>
				<td>
					<p>&lt;%current.eAllContents("OperationalActor").nSize()%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Number of Operational Roles</p>
				</td>
				<td>
					<p>OperationalAnalysis</p>
				</td>
				<td>
					<p>&lt;%current.eAllContents("Role").nSize()%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Number of Communication Means</p>
				</td>
				<td>
					<p>OperationalAnalysis</p>
				</td>
				<td>
					<p>&lt;%current.eAllContents("CommunicationMean").nSize()%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Number of System Functions</p>
				</td>
				<td>
					<p>SystemAnalysis</p>
				</td>
				<td>
					<p>&lt;%current.eAllContents("SystemFunction").nSize()%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Number of Functional Exchanges in SA</p>
				</td>
				<td>
					<p>SystemAnalysis</p>
				</td>
				<td>
					<p>&lt;%current.eAllContents("FunctionalExchange").nSize()%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Number of Function Ports in SA</p>
				</td>
				<td>
					<p>SystemAnalysis</p>
				</td>
				<td>
					<p>&lt;%current.eAllContents().filter("FunctionPort").nSize%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Number of System Actors</p>
				</td>
				<td>
					<p>SystemAnalysis</p>
				</td>
				<td>
					<p>&lt;%current.eAllContents("Actor").nSize()%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Number of Functional Chains in SA</p>
				</td>
				<td>
					<p>SystemAnalysis</p>
				</td>
				<td>
					<p>&lt;%current.eAllContents("FunctionalChain").nSize()%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Number of Scenarios in SA</p>
				</td>
				<td>
					<p>SystemAnalysis</p>
				</td>
				<td>
					<p>&lt;%current.eAllContents("Scenario").nSize()%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Number of Behaviour Components in PA</p>
				</td>
				<td>
					<p>PhysicalArchitecture</p>
				</td>
				<td>
					<p>&lt;%current.eAllContents("PhysicalComponent")
						[nature=="BEHAVIOR"].nSize%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Number of Implementation PC (nodes) in PA</p>
				</td>
				<td>
					<p>PhysicalArchitecture</p>
				</td>
				<td>
					<p>&lt;%current.eAllContents("PhysicalComponent")
						[nature=="NODE"].nSize%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Number of Physical Links</p>
				</td>
				<td>
					<p>PhysicalArchitecture</p>
				</td>
				<td>
					<p>&lt;%current.eAllContents("PhysicalLink").nSize()%&gt;</p>
				</td>
			</tr>
			<tr valign="TOP">
				<td>
					<p>Number of Physical Ports</p>
				</td>
				<td>
					<p>PhysicalArchitecture</p>
				</td>
				<td>
					<p>&lt;%current.eAllContents("PhysicalPort").nSize()%&gt;</p>
				</td>
			</tr>
		</table>
		<p>
			<br/>
		</p>
		<h3 id="Advanced_Queries">Advanced Queries</h3>
		<p>With Acceleo, you can navigate in elements following references and attributes:
			&lt;%current.outgoing%&gt; on a SystemFunction will retrieve outgoing functional exchanges:
			<br/>
			<br/>

			<img height="150" width="500" border="0" src="Images/12_5_ Acceleo Queries_html_51a25b.png"/>
			<br/>

			<br/>
			There is many way to retrieve which references to use for an element. These references ca be used in a request like the above outgoing reference.
			For instance, you can retrieve references with Acceleo using the following request:
			&lt;%current.eClass.eAllReferences%&gt; (or current.eClass.eAllAttributes to retrieve attributes)

			<br/>
			<br/>

			<img height="300" width="550" border="0" src="Images/12_5_ Acceleo Queries_html_m4a26b2e2.png"/>
			<br/>

			<br/>
			One easiest way to retrieve references or attributes is to open the Properties View and go the Expert tab then choose relevant references/attributes for your query

			<br/>
			<br/>

			<img height="250" width="800" border="0" src="Images/12_5_ Acceleo Queries_html_m44230212.png"/>
			<br/>
			<br/>
			You just have to write the reference name in a camelCaseFormat to use it with Acceleo (e.g. Available In States =&gt; availableInStates)
		</p>
	</body>
</html>